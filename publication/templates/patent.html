<div class="container" ng-cloak>
  <meta content="{{::vm.record.title}}" property="og:title" />
  <meta content="article" property="og:type" />
  <meta content="{{::vm.record.url}}" property="og:url" />

  <div class="ne-publication">
    <div class="row">
      <div class="col-xs-12 col-sm-7" ng-cloak>

        <div class="row">
          <div class="col-xs-12">
            <div class="ne-publication__header">
              <h3 class="wui-super-header">Patent</h3>

              <h2 class="wui-content-title wui-content-title--ne-publication">{{::vm.record.title}}</h2>

              <div class="wui-descriptor" ng-show="vm.record.authors.length > 0">
                <span ng-repeat="author in vm.record.authors | limitTo : authorsLimit track by $index">
                  {{::author}}
                  <span class="ne-bullet" ng-show="!$last">&bull;</span>
                </span>
              </div>

              <div class="wui-descriptor wui-descriptor--uppercase">
                <div class="ne-publication__metadata" ng-show="vm.record.assignee.length > 0">
                  <span>Assignee:</span>

                  <span ng-repeat="assign in vm.record.assignee | limitTo : authorsLimit track by $index">
                    <span ng-bind-html="::assign"></span>
                    <span class="ne-bullet" ng-show="!$last">&bull;</span>
                  </span>
                </div>

                <div class="ne-publication__metadata" ng-show="vm.record.pubDate">
                  <span>Publication date:</span>
                  <span>{{::vm.record.pubDate}}</span>
                </div>

                <div class="ne-publication__metadata" ng-show="vm.record.patentNo">
                  <span>Publication number:</span>
                  <span>{{::vm.record.patentNo[0]}}</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12">
            <h3 class="wui-subtitle wui-subtitle--publication-abstract">Abstract</h3>

            <p class="ne-publication__body wui-large-text wui-large-text--serif">{{::vm.record.abstract}}</p>

            <h3 class="wui-subtitle">IPC</h3>

            <p class="ne-publication__body wui-large-text wui-large-text--serif">
              <span ng-show="vm.record.ipccodes.length > 0">Current:</span>

                <span ng-repeat="ipc in vm.record.ipccodes track by $index">{{ipc.replace('-', ' ')}}
                  <span ng-show="!$last">;</span>
                </span>
            </p>

            <a
              class="wui-btn wui-btn--secondary wui-btn--view-in-ti"
              target="_blank"
              ng-href="{{vm.patentsURL}}"
              ng-hide="vm.patentsURL === undefined"
              data.analytics-event data.event-action="{{vm.id}}" data.event-category="patents-ck-fulldetails"
            >View in Thomson Innovation</a>
          </div>
        </div>
      </div>

      <div class="col-xs-12 col-sm-5 col-md-4 col-md-offset-1">
        <div class="ne-publication-sidebar">

          <div class="row">
            <div class="col-xs-12">
              <div class="ne-publication-sidebar__social-share">
                <button
                  analytics-event
                  class="share-btn share-btn--large pull-left"
                  event-category="share-google-plus-patent"
                  event-action="{{::id}}"
                  social-gplus
                  tooltip="Share on Google+"
                  tooltip-placement="bottom">
                  <i class="fa fa-google-plus share-menu-icon"></i>
                </button>

                <button facebook-share
                        analytics-event
                        event-category="share-facebook-patent"
                        event-action="{{::id}}"
                        link="{{vm.record.url}}"
                        name="{{vm.record.title}}"
                        caption="{{vm.record.source}}"
                        description="{{vm.record.abstract}}">
                </button>

                <button
                  analytics-event
                  class="share-btn share-btn--large pull-left"
                  event-category="share-twitter-patent"
                  event-action="{{::id}}"
                  social-twitter
                  status="{{vm.record.title | ellipsis:80:true:'...'}} - {{vm.record.url}}"
                  tooltip="Share on Twitter"
                  tooltip-placement="bottom">
                  <i class="fa fa-twitter share-menu-icon"></i>
                </button>

                <button linkedin-share
                        analytics-event
                        event-category="share-linkedin-patent"
                        event-action="{{::id}}"
                        link="{{vm.record.url}}"
                        picture="https://d3rm6si6l6yzgk.cloudfront.net/1p-frontend/neon-social-share-banner.jpg"
                        name="{{vm.record.title}}"
                        description="{{vm.record.abstract}}">
                </button>
              </div>

              <div class="ne-publication-sidebar__actions">
                <ne-watch-directive publication-id="{{::vm.id}}" type="{{::vm.record.type}}"></ne-watch-directive>
              </div>

              <div class="ne-publication-sidebar__metrics">
                <div class="wui-metric wui-metric--ne-publication-sidebar" ng-show="vm.viewCount">
                  <span class="wui-metric__value">{{vm.viewCount | number}}</span>
                  <span class="wui-metric__label">Views</span>
                </div>

                <div class="wui-icon-metric wui-metric--ne-publication-sidebar">
                  <i class="wui-icon-metric__icon fa fa-comment-o"></i>
                  <span class="wui-icon-metric__value">{{vm.commentCount}}</span>
                  <span class="wui-icon-metric__label">Comments</span>
                </div>

                <div class="wui-icon-metric wui-metric--ne-publication-sidebar">
                  <i class="wui-icon-metric__icon wui-icon wui-icon--times-cited"></i>
                  <span class="wui-icon-metric__value">{{::vm.record.citedcount}}</span>
                  <span class="wui-icon-metric__label">Times Cited</span>
                </div>

                <div class="wui-metric wui-metric--ne-publication-sidebar">
                  <span class="wui-metric__value">{{::vm.record.citedpatents}}</span>
                  <span class="wui-metric__label">Cited Patents</span>
                </div>

                <div class="wui-metric wui-metric--ne-publication-sidebar">
                  <span class="wui-metric__value">{{::vm.record.citedarticle}}</span>
                  <span class="wui-metric__label">Cited Articles</span>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12 col-sm-7">
        <div class="ne-publication__comment-list">
          <ng-include src="'/modules/components/comment/templates/comment-list.html'"></ng-include>
        </div>
      </div>
    </div>
  </div>

</div>
